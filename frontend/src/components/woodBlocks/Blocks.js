import React, { useEffect, useRef, useState } from "react";
import ga from "../common/GAUtils";
import imageSrc from "./input.png";
import cloneDeep from "lodash.clonedeep";

const trackEvent = ga.trackEventBuilder("WoodBlocks");

/**
 * AB, CDが交差しているかどうか判定
 */
function isCrossing(A, B, C, D) {
  // 外積を計算する関数
  const crossProduct = (p1, p2, p3) => {
    const [x1, y1] = p1;
    const [x2, y2] = p2;
    const [x3, y3] = p3;
    return (x2 - x1) * (y3 - y1) - (y2 - y1) * (x3 - x1);
  };

  // 線分ABとCDが交差しているか判定
  const d1 = crossProduct(A, B, C); // CがABのどちら側にあるか
  const d2 = crossProduct(A, B, D); // DがABのどちら側にあるか
  const d3 = crossProduct(C, D, A); // AがCDのどちら側にあるか
  const d4 = crossProduct(C, D, B); // BがCDのどちら側にあるか

  // 条件1: ABの両端がCDの異なる側にある
  const condition1 = d1 * d2 < 0;
  // 条件2: CDの両端がABの異なる側にある
  const condition2 = d3 * d4 < 0;

  return condition1 && condition2;
}

/**
 * contourの中で(a, b)に最も近い点を発見
 * @param {*} contour
 * @param {*} a
 * @param {*} b
 * @returns
 */
function findClosestIndex(contour, a, b) {
  let minDistance = Infinity;
  let closestIndex = -1;
  for (let i = 0; i < contour.length; i++) {
    const [x, y] = contour[i];
    const distance = Math.sqrt((a - x) ** 2 + (b - y) ** 2);
    if (distance < minDistance) {
      minDistance = distance;
      closestIndex = i;
    }
  }
  return closestIndex;
}

/**
 * pointsの合計距離を算出
 * @param {*} points
 * @returns
 */
function calculateTotalDistance(points) {
  if (points.length < 2) {
    // 点が1つ以下の場合は計算不能
    return 0;
  }

  let totalDistance = 0;
  for (let i = 0; i < points.length - 1; i++) {
    const [x1, y1] = points[i];
    const [x2, y2] = points[i + 1];

    // 距離を計算 (ユークリッド距離)
    const distance = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
    totalDistance += distance;
  }
  return totalDistance;
}

/**
 * pointsの距離的にX等分された場合の最初の点を見つける
 * @param {*} points
 * @returns
 */
function findXthPoints(points, x) {
  if (points.length < 2) {
    // 点が1つ以下の場合は計算不能
    return null;
  }

  const totalDistance = calculateTotalDistance(points) / x;
  const tempPoints = [points[0]];
  for (let point of points) {
    tempPoints.push(point);
    const tempDist = calculateTotalDistance(tempPoints);
    if (tempDist > totalDistance) {
      return point;
    }
  }
  return points[points.length - 1];
}

/**
 * 本体
 * @returns
 */
function Blocks() {
  const canvasRef = useRef(null);
  const [contours, setContours] = useState([]); // 境界線データを保持
  const [dragging, setDragging] = useState({ active: false });
  const [file, setFile] = useState();
  const pointStack = useRef([]);
  const closestIndex = useRef({ index: null });

  useEffect(() => {
    const canvas = canvasRef.current;
    const ctx = canvas.getContext("2d");

    // 画像と境界線を描画
    const draw = () => {
      // 画像の読み込み
      const image = new Image();
      image.src = imageSrc;
      image.onload = () => {
        // キャンバスサイズ設定
        canvas.width = image.width;
        canvas.height = image.height;

        // 画像描画
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(image, 0, 0);

        // 境界線描画
        ctx.strokeStyle = "red";
        ctx.lineWidth = 3;
        contours.forEach((contour) => {
          ctx.beginPath();
          contour.forEach(([x, y]) => ctx.lineTo(x, y));
          ctx.closePath();
          ctx.stroke();
        });

        // 描画中の線
        ctx.beginPath();
        pointStack.current.forEach(([x, y]) => ctx.lineTo(x, y));
        ctx.stroke();
      };
    };

    draw();
  }, [imageSrc, contours, pointStack.current]);

  /**
   * マウス押下時
   * @param {*} e
   */
  const handleMouseDown = (e) => {
    setDragging({ active: true });
    closestIndex.current = { index: null };
    pointStack.current = [];
  };

  /**
   * マウスドラッグ時
   * @param {*} e
   * @returns
   */
  const handleMouseMove = (e) => {
    if (!dragging.active) return;
    const rect = canvasRef.current.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;
    const newContours = [...contours];
    for (
      let contourIndex = 0;
      contourIndex < newContours.length;
      contourIndex++
    ) {
      const contour = newContours[contourIndex];
      if (closestIndex.current.index == null) {
        const _closestIndex = findClosestIndex(contour, mouseX, mouseY);
        closestIndex.current = { index: _closestIndex };
      } else {
        const stack = cloneDeep(pointStack.current);
        stack.push([mouseX, mouseY]);
        pointStack.current = stack;
      }

      setContours(newContours);
    }
  };

  /**
   * マウスクリック終了時
   */
  const handleMouseUp = () => {
    setDragging({ active: false });
    const newContours = [...contours];
    for (
      let contourIndex = 0;
      contourIndex < newContours.length;
      contourIndex++
    ) {
      const contour = newContours[contourIndex];
      const lastPoint = pointStack.current[pointStack.current.length - 1];
      const _closestIndex = findClosestIndex(
        contour,
        lastPoint[0],
        lastPoint[1]
      );

      // 点がクロスしているかどうかをチェック
      const startIdx = closestIndex.current.index;
      const endIdx = _closestIndex;
      let [minIdx, maxIdx] =
        startIdx < endIdx ? [startIdx, endIdx] : [endIdx, startIdx];
      const startToMin = contour.slice(0, minIdx);
      const maxToEnd = contour.slice(maxIdx, contour.length);
      const minToMax = contour.slice(minIdx, maxIdx);
      const distA = calculateTotalDistance(startToMin);
      const distB = calculateTotalDistance(maxToEnd);
      const distC = calculateTotalDistance(minToMax);
      if (distA + distB < distC) {
        contour.splice(0, minIdx);
        contour.splice(maxIdx - minIdx, contour.length);
        minIdx = contour.length - 1;
        maxIdx = 0;
      }

      // 線が交差していないか調査
      const stack = pointStack.current;
      const a = contour[minIdx];
      const b = stack[0];
      const c = contour[maxIdx];
      const d = stack[stack.length - 1];
      const e = findXthPoints(stack, 3);
      const f = findXthPoints(stack, 1.5);
      if (
        isCrossing(a, b, c, d) ||
        isCrossing(a, e, c, d) ||
        isCrossing(a, f, c, d) ||
        isCrossing(a, b, c, e) ||
        isCrossing(a, b, c, f)
      ) {
        stack.reverse();
      }

      // 点を挿入
      contour.splice(minIdx + 1, maxIdx - minIdx, ...stack);
      closestIndex.current = { index: null };
      pointStack.current = [];
      setContours(newContours);
    }
    // if (onContoursUpdated) {
    //   onContoursUpdated(contours); // 更新された境界線を親コンポーネントに送信
    // }
  };

  const getContours = (e) => {
    // FormDataを作成
    const file = e.target.files[0];
    const formData = new FormData();
    formData.append("file", file);

    // 切り取り処理
    fetch("/api/get-image-contours/", {
      method: "POST",
      body: formData,
      responseType: "blob", // バイナリデータとしてレスポンスを受け取る
    })
      .then(async (response) => {
        if (!response.ok) {
          const errorData = await response.json();
          throw new Error(errorData.error);
        }
        const json = await response.json();
        return json;
      })
      .then((json) => {
        const contours = JSON.parse(json.contours);
        setContours([contours[0].flat()]);
      })
      .catch((error) => {})
      .finally(() => {});
  };

  return (
    <div className="contianer w-full h-full">
      <input
        type="file"
        onChange={getContours}
        className="file-input file-input-bordered w-full max-w-2xl mt-4 mb-4"
      />
      <canvas
        ref={canvasRef}
        onMouseDown={handleMouseDown}
        onMouseMove={handleMouseMove}
        onMouseUp={handleMouseUp}
        style={{
          border: "1px solid black",
          cursor: "pointer",
          height: "1080px",
          width: "1080px",
        }}
      />
    </div>
  );
}

const contoursData = [
  [
    [428, 162],
    [427, 163],
    [382, 163],
    [381, 164],
    [360, 164],
    [359, 165],
    [346, 165],
    [345, 164],
    [333, 164],
    [333, 165],
    [332, 166],
    [332, 172],
    [331, 173],
    [329, 173],
    [329, 178],
    [328, 179],
    [327, 179],
    [325, 177],
    [323, 177],
    [322, 176],
    [321, 176],
    [317, 172],
    [316, 172],
    [315, 171],
    [314, 171],
    [310, 167],
    [308, 167],
    [307, 168],
    [305, 168],
    [302, 171],
    [302, 180],
    [303, 181],
    [303, 183],
    [304, 184],
    [304, 185],
    [305, 186],
    [306, 186],
    [307, 185],
    [308, 185],
    [309, 186],
    [314, 186],
    [315, 185],
    [316, 185],
    [317, 186],
    [317, 191],
    [318, 192],
    [318, 199],
    [319, 200],
    [319, 207],
    [320, 208],
    [320, 211],
    [321, 212],
    [321, 214],
    [322, 215],
    [322, 217],
    [323, 218],
    [323, 220],
    [324, 221],
    [324, 223],
    [325, 224],
    [325, 225],
    [326, 226],
    [326, 228],
    [327, 229],
    [327, 230],
    [328, 231],
    [328, 232],
    [329, 233],
    [329, 234],
    [332, 237],
    [332, 238],
    [333, 239],
    [333, 242],
    [332, 243],
    [332, 246],
    [330, 248],
    [326, 248],
    [325, 249],
    [323, 249],
    [322, 250],
    [321, 250],
    [320, 251],
    [318, 251],
    [317, 252],
    [315, 252],
    [314, 253],
    [313, 253],
    [310, 256],
    [309, 256],
    [307, 258],
    [306, 258],
    [294, 270],
    [294, 271],
    [293, 272],
    [293, 273],
    [292, 274],
    [292, 275],
    [291, 276],
    [291, 280],
    [292, 281],
    [292, 283],
    [293, 284],
    [293, 285],
    [294, 286],
    [294, 287],
    [295, 288],
    [295, 289],
    [292, 292],
    [291, 292],
    [286, 287],
    [286, 286],
    [279, 279],
    [278, 279],
    [277, 278],
    [276, 278],
    [275, 277],
    [276, 276],
    [276, 275],
    [278, 273],
    [278, 272],
    [279, 271],
    [268, 271],
    [267, 272],
    [265, 272],
    [263, 274],
    [261, 274],
    [258, 277],
    [247, 277],
    [246, 278],
    [244, 278],
    [234, 288],
    [234, 289],
    [232, 291],
    [228, 291],
    [227, 292],
    [224, 292],
    [223, 293],
    [221, 293],
    [218, 296],
    [220, 298],
    [218, 300],
    [218, 301],
    [217, 302],
    [215, 302],
    [212, 305],
    [211, 305],
    [209, 307],
    [208, 307],
    [200, 315],
    [197, 315],
    [194, 318],
    [193, 318],
    [191, 320],
    [190, 320],
    [185, 325],
    [185, 326],
    [183, 328],
    [183, 329],
    [182, 330],
    [182, 335],
    [183, 336],
    [183, 337],
    [184, 338],
    [184, 339],
    [186, 341],
    [186, 342],
    [187, 343],
    [187, 344],
    [188, 345],
    [188, 346],
    [189, 347],
    [188, 348],
    [182, 348],
    [181, 349],
    [178, 349],
    [177, 350],
    [176, 350],
    [175, 351],
    [174, 351],
    [173, 352],
    [170, 352],
    [166, 356],
    [165, 356],
    [162, 359],
    [162, 363],
    [161, 364],
    [161, 365],
    [160, 366],
    [160, 374],
    [159, 375],
    [159, 387],
    [160, 388],
    [160, 393],
    [161, 394],
    [161, 395],
    [162, 396],
    [162, 398],
    [163, 399],
    [163, 401],
    [161, 403],
    [161, 405],
    [164, 408],
    [164, 410],
    [163, 411],
    [159, 411],
    [159, 412],
    [155, 416],
    [155, 420],
    [154, 421],
    [153, 421],
    [152, 422],
    [152, 423],
    [151, 424],
    [151, 433],
    [150, 434],
    [150, 438],
    [151, 439],
    [151, 440],
    [152, 441],
    [152, 442],
    [151, 443],
    [151, 447],
    [152, 448],
    [152, 450],
    [154, 452],
    [159, 452],
    [160, 453],
    [160, 457],
    [158, 459],
    [156, 459],
    [155, 460],
    [151, 460],
    [151, 462],
    [152, 463],
    [152, 467],
    [154, 469],
    [154, 470],
    [155, 471],
    [155, 472],
    [157, 474],
    [157, 475],
    [158, 476],
    [158, 478],
    [156, 480],
    [156, 481],
    [155, 482],
    [155, 488],
    [156, 489],
    [158, 489],
    [159, 490],
    [160, 490],
    [163, 493],
    [163, 494],
    [165, 496],
    [165, 497],
    [167, 499],
    [169, 499],
    [172, 496],
    [173, 496],
    [176, 499],
    [178, 499],
    [180, 497],
    [182, 497],
    [183, 496],
    [185, 496],
    [186, 495],
    [187, 495],
    [188, 496],
    [191, 496],
    [199, 488],
    [199, 486],
    [201, 484],
    [201, 482],
    [202, 481],
    [202, 479],
    [203, 478],
    [203, 476],
    [204, 475],
    [205, 475],
    [206, 474],
    [207, 475],
    [208, 475],
    [209, 476],
    [209, 479],
    [210, 480],
    [210, 483],
    [211, 484],
    [211, 487],
    [212, 488],
    [212, 492],
    [213, 493],
    [213, 496],
    [214, 497],
    [214, 500],
    [215, 501],
    [215, 504],
    [224, 513],
    [225, 513],
    [229, 517],
    [240, 517],
    [241, 518],
    [244, 515],
    [245, 515],
    [246, 514],
    [247, 514],
    [248, 513],
    [249, 513],
    [248, 512],
    [249, 511],
    [252, 511],
    [253, 510],
    [253, 509],
    [254, 508],
    [257, 508],
    [258, 507],
    [259, 507],
    [260, 506],
    [261, 506],
    [262, 505],
    [263, 505],
    [266, 502],
    [268, 502],
    [268, 501],
    [267, 500],
    [267, 499],
    [266, 498],
    [266, 497],
    [268, 495],
    [269, 495],
    [272, 492],
    [273, 492],
    [274, 491],
    [275, 491],
    [275, 478],
    [276, 477],
    [276, 476],
    [283, 469],
    [283, 468],
    [284, 467],
    [284, 466],
    [285, 465],
    [285, 454],
    [284, 453],
    [284, 452],
    [283, 451],
    [283, 450],
    [284, 449],
    [284, 448],
    [285, 447],
    [285, 446],
    [286, 445],
    [286, 444],
    [287, 443],
    [287, 442],
    [291, 438],
    [291, 437],
    [295, 433],
    [295, 429],
    [293, 427],
    [293, 422],
    [292, 421],
    [281, 421],
    [280, 420],
    [281, 419],
    [281, 418],
    [288, 411],
    [290, 411],
    [292, 413],
    [292, 414],
    [293, 415],
    [293, 412],
    [291, 410],
    [290, 410],
    [289, 409],
    [284, 409],
    [283, 408],
    [283, 407],
    [280, 404],
    [281, 403],
    [284, 403],
    [285, 402],
    [286, 402],
    [287, 401],
    [287, 400],
    [289, 398],
    [289, 397],
    [286, 394],
    [286, 393],
    [285, 392],
    [285, 390],
    [286, 389],
    [286, 388],
    [288, 386],
    [286, 384],
    [287, 383],
    [287, 379],
    [286, 379],
    [284, 377],
    [284, 375],
    [282, 375],
    [281, 374],
    [280, 374],
    [278, 372],
    [278, 368],
    [270, 368],
    [269, 367],
    [269, 366],
    [270, 365],
    [271, 365],
    [272, 364],
    [277, 364],
    [278, 363],
    [279, 363],
    [280, 362],
    [286, 362],
    [286, 361],
    [288, 359],
    [288, 358],
    [290, 356],
    [290, 353],
    [291, 352],
    [291, 350],
    [290, 349],
    [290, 348],
    [289, 347],
    [289, 344],
    [290, 343],
    [291, 343],
    [292, 344],
    [295, 344],
    [296, 345],
    [299, 345],
    [301, 347],
    [303, 347],
    [304, 348],
    [308, 348],
    [309, 349],
    [309, 351],
    [310, 352],
    [310, 353],
    [312, 355],
    [312, 356],
    [321, 365],
    [322, 365],
    [329, 372],
    [330, 372],
    [331, 373],
    [332, 373],
    [334, 375],
    [335, 375],
    [336, 376],
    [337, 376],
    [339, 378],
    [340, 378],
    [341, 379],
    [357, 379],
    [358, 378],
    [359, 378],
    [360, 377],
    [364, 377],
    [365, 378],
    [363, 380],
    [365, 382],
    [364, 383],
    [363, 383],
    [361, 385],
    [361, 386],
    [360, 387],
    [360, 390],
    [359, 391],
    [356, 391],
    [355, 392],
    [351, 392],
    [349, 394],
    [347, 394],
    [345, 396],
    [344, 396],
    [343, 397],
    [342, 397],
    [340, 399],
    [340, 401],
    [337, 404],
    [337, 406],
    [336, 407],
    [336, 413],
    [333, 416],
    [332, 416],
    [331, 417],
    [330, 417],
    [325, 422],
    [325, 425],
    [324, 426],
    [324, 427],
    [325, 427],
    [326, 428],
    [328, 428],
    [329, 429],
    [329, 430],
    [324, 435],
    [322, 435],
    [321, 436],
    [321, 438],
    [322, 439],
    [327, 439],
    [330, 442],
    [330, 444],
    [328, 446],
    [328, 447],
    [325, 450],
    [325, 451],
    [324, 452],
    [324, 453],
    [321, 456],
    [321, 459],
    [324, 459],
    [326, 461],
    [326, 473],
    [327, 474],
    [327, 478],
    [328, 479],
    [328, 480],
    [329, 480],
    [332, 483],
    [333, 483],
    [334, 484],
    [338, 484],
    [339, 485],
    [339, 490],
    [338, 491],
    [336, 489],
    [335, 489],
    [331, 493],
    [329, 493],
    [327, 491],
    [327, 486],
    [328, 485],
    [327, 484],
    [325, 484],
    [324, 483],
    [321, 483],
    [318, 486],
    [316, 486],
    [316, 487],
    [315, 488],
    [312, 485],
    [308, 485],
    [308, 487],
    [310, 489],
    [310, 490],
    [313, 493],
    [313, 494],
    [316, 497],
    [316, 498],
    [318, 500],
    [318, 501],
    [321, 504],
    [321, 505],
    [323, 507],
    [323, 508],
    [322, 509],
    [322, 510],
    [323, 511],
    [323, 515],
    [325, 517],
    [325, 519],
    [326, 520],
    [328, 520],
    [329, 519],
    [330, 519],
    [331, 518],
    [331, 514],
    [332, 513],
    [332, 512],
    [337, 507],
    [339, 507],
    [340, 506],
    [343, 506],
    [344, 505],
    [345, 505],
    [346, 504],
    [349, 504],
    [350, 503],
    [355, 503],
    [356, 504],
    [362, 504],
    [363, 503],
    [367, 503],
    [368, 504],
    [370, 504],
    [371, 505],
    [371, 508],
    [372, 509],
    [378, 509],
    [384, 515],
    [386, 515],
    [387, 516],
    [387, 517],
    [388, 518],
    [389, 518],
    [390, 519],
    [393, 519],
    [394, 520],
    [393, 519],
    [394, 518],
    [398, 518],
    [400, 516],
    [401, 516],
    [402, 515],
    [403, 515],
    [408, 510],
    [408, 508],
    [409, 507],
    [409, 505],
    [410, 504],
    [412, 504],
    [413, 503],
    [414, 503],
    [415, 504],
    [416, 504],
    [422, 510],
    [423, 510],
    [424, 511],
    [425, 511],
    [426, 512],
    [431, 512],
    [432, 511],
    [433, 511],
    [434, 512],
    [434, 513],
    [435, 514],
    [435, 519],
    [436, 520],
    [436, 521],
    [437, 521],
    [439, 523],
    [439, 517],
    [435, 513],
    [435, 512],
    [434, 511],
    [434, 510],
    [438, 506],
    [439, 506],
    [440, 505],
    [444, 505],
    [446, 503],
    [447, 504],
    [449, 502],
    [451, 502],
    [452, 501],
    [455, 501],
    [456, 500],
    [463, 500],
    [464, 501],
    [467, 501],
    [468, 502],
    [469, 502],
    [470, 503],
    [472, 503],
    [473, 502],
    [474, 502],
    [475, 503],
    [477, 503],
    [478, 504],
    [483, 504],
    [484, 505],
    [485, 505],
    [486, 506],
    [487, 506],
    [488, 507],
    [491, 507],
    [493, 509],
    [493, 515],
    [488, 520],
    [488, 525],
    [489, 526],
    [489, 530],
    [494, 535],
    [511, 535],
    [512, 536],
    [513, 536],
    [514, 537],
    [519, 537],
    [522, 540],
    [522, 542],
    [521, 543],
    [521, 545],
    [522, 546],
    [522, 547],
    [525, 550],
    [525, 551],
    [526, 551],
    [527, 552],
    [527, 555],
    [529, 557],
    [529, 558],
    [532, 561],
    [532, 562],
    [533, 563],
    [534, 563],
    [536, 565],
    [534, 567],
    [535, 568],
    [537, 568],
    [538, 567],
    [540, 569],
    [543, 569],
    [544, 568],
    [545, 568],
    [546, 567],
    [547, 567],
    [548, 568],
    [548, 569],
    [551, 566],
    [551, 565],
    [553, 563],
    [553, 548],
    [555, 546],
    [556, 547],
    [560, 547],
    [561, 548],
    [562, 548],
    [563, 549],
    [563, 555],
    [565, 553],
    [565, 552],
    [567, 550],
    [567, 549],
    [569, 547],
    [570, 547],
    [572, 549],
    [573, 548],
    [574, 548],
    [578, 544],
    [578, 543],
    [579, 542],
    [580, 543],
    [581, 543],
    [581, 541],
    [582, 540],
    [583, 541],
    [583, 543],
    [584, 544],
    [584, 545],
    [587, 548],
    [588, 547],
    [589, 547],
    [592, 544],
    [596, 548],
    [597, 548],
    [598, 547],
    [599, 547],
    [600, 546],
    [605, 551],
    [607, 551],
    [608, 550],
    [609, 550],
    [609, 549],
    [610, 548],
    [612, 550],
    [614, 550],
    [615, 551],
    [616, 550],
    [616, 549],
    [617, 548],
    [617, 547],
    [618, 546],
    [618, 545],
    [619, 544],
    [619, 539],
    [620, 538],
    [620, 537],
    [621, 536],
    [621, 534],
    [622, 533],
    [622, 530],
    [623, 529],
    [624, 529],
    [625, 530],
    [625, 531],
    [631, 537],
    [631, 538],
    [636, 543],
    [638, 543],
    [639, 544],
    [644, 544],
    [644, 538],
    [643, 537],
    [643, 533],
    [642, 532],
    [642, 531],
    [643, 530],
    [652, 539],
    [653, 539],
    [654, 540],
    [656, 540],
    [658, 538],
    [658, 534],
    [657, 533],
    [657, 530],
    [656, 529],
    [656, 528],
    [657, 527],
    [658, 527],
    [659, 528],
    [662, 528],
    [663, 527],
    [664, 527],
    [664, 526],
    [663, 525],
    [663, 524],
    [662, 523],
    [662, 520],
    [663, 519],
    [666, 522],
    [667, 522],
    [668, 523],
    [670, 523],
    [671, 524],
    [673, 524],
    [674, 525],
    [673, 526],
    [676, 526],
    [677, 527],
    [678, 526],
    [679, 526],
    [682, 523],
    [686, 523],
    [688, 525],
    [688, 528],
    [689, 528],
    [690, 527],
    [691, 527],
    [692, 528],
    [692, 532],
    [694, 534],
    [694, 535],
    [693, 536],
    [693, 538],
    [692, 539],
    [692, 540],
    [693, 541],
    [693, 544],
    [692, 545],
    [693, 545],
    [697, 549],
    [697, 550],
    [700, 553],
    [700, 554],
    [704, 558],
    [704, 563],
    [704, 560],
    [706, 558],
    [706, 557],
    [708, 555],
    [708, 552],
    [710, 550],
    [711, 551],
    [711, 550],
    [712, 549],
    [712, 548],
    [713, 547],
    [713, 546],
    [716, 543],
    [718, 543],
    [719, 542],
    [721, 542],
    [722, 543],
    [724, 543],
    [725, 544],
    [738, 544],
    [739, 543],
    [741, 543],
    [744, 546],
    [747, 546],
    [748, 545],
    [759, 545],
    [760, 546],
    [761, 546],
    [761, 538],
    [760, 537],
    [760, 524],
    [761, 523],
    [761, 522],
    [762, 521],
    [762, 518],
    [761, 518],
    [759, 516],
    [758, 516],
    [757, 515],
    [757, 514],
    [758, 513],
    [758, 510],
    [756, 508],
    [756, 500],
    [758, 498],
    [759, 498],
    [760, 499],
    [761, 499],
    [767, 493],
    [767, 487],
    [769, 485],
    [770, 486],
    [771, 486],
    [772, 487],
    [776, 487],
    [772, 483],
    [772, 482],
    [773, 481],
    [773, 478],
    [772, 478],
    [771, 479],
    [769, 479],
    [768, 478],
    [768, 476],
    [769, 475],
    [769, 468],
    [767, 466],
    [767, 465],
    [768, 464],
    [769, 465],
    [769, 461],
    [771, 459],
    [772, 459],
    [773, 458],
    [774, 458],
    [776, 456],
    [781, 456],
    [781, 454],
    [782, 453],
    [782, 450],
    [784, 448],
    [791, 448],
    [792, 449],
    [793, 449],
    [797, 453],
    [800, 453],
    [801, 454],
    [802, 454],
    [803, 455],
    [804, 455],
    [804, 454],
    [805, 453],
    [805, 451],
    [806, 450],
    [806, 449],
    [808, 447],
    [809, 447],
    [810, 446],
    [811, 446],
    [812, 445],
    [813, 445],
    [814, 444],
    [819, 444],
    [820, 443],
    [820, 440],
    [821, 439],
    [826, 439],
    [827, 438],
    [827, 437],
    [826, 436],
    [827, 435],
    [828, 435],
    [828, 434],
    [827, 434],
    [826, 433],
    [826, 432],
    [825, 431],
    [825, 425],
    [826, 424],
    [827, 424],
    [828, 423],
    [829, 423],
    [830, 422],
    [832, 422],
    [833, 421],
    [834, 421],
    [835, 420],
    [836, 420],
    [841, 415],
    [841, 414],
    [842, 413],
    [842, 412],
    [840, 412],
    [839, 413],
    [837, 413],
    [836, 412],
    [836, 407],
    [835, 406],
    [834, 406],
    [833, 407],
    [832, 407],
    [832, 409],
    [830, 411],
    [830, 412],
    [829, 413],
    [829, 415],
    [819, 425],
    [818, 425],
    [817, 426],
    [816, 426],
    [814, 428],
    [813, 428],
    [809, 432],
    [808, 431],
    [808, 430],
    [814, 424],
    [815, 424],
    [816, 423],
    [817, 423],
    [817, 422],
    [818, 421],
    [818, 419],
    [816, 417],
    [815, 417],
    [814, 416],
    [813, 416],
    [812, 415],
    [811, 415],
    [810, 414],
    [808, 414],
    [806, 412],
    [803, 412],
    [802, 411],
    [802, 408],
    [803, 407],
    [803, 405],
    [805, 403],
    [809, 403],
    [810, 402],
    [811, 402],
    [812, 401],
    [817, 401],
    [818, 402],
    [818, 407],
    [818, 401],
    [817, 400],
    [818, 399],
    [817, 398],
    [815, 398],
    [813, 396],
    [812, 396],
    [811, 395],
    [809, 395],
    [807, 397],
    [804, 397],
    [803, 398],
    [800, 398],
    [798, 400],
    [796, 400],
    [795, 399],
    [794, 399],
    [792, 401],
    [790, 401],
    [789, 402],
    [788, 402],
    [787, 403],
    [786, 403],
    [785, 404],
    [776, 404],
    [772, 400],
    [772, 399],
    [770, 397],
    [770, 396],
    [769, 395],
    [769, 392],
    [767, 390],
    [767, 389],
    [765, 387],
    [765, 373],
    [760, 368],
    [759, 369],
    [759, 371],
    [754, 376],
    [750, 376],
    [749, 375],
    [747, 375],
    [744, 372],
    [743, 372],
    [739, 368],
    [736, 368],
    [734, 366],
    [734, 365],
    [735, 364],
    [735, 347],
    [736, 346],
    [738, 348],
    [738, 350],
    [739, 351],
    [739, 353],
    [740, 354],
    [740, 355],
    [741, 356],
    [741, 357],
    [743, 359],
    [743, 360],
    [744, 361],
    [744, 362],
    [746, 364],
    [747, 364],
    [748, 365],
    [749, 365],
    [750, 364],
    [750, 362],
    [751, 361],
    [751, 355],
    [752, 354],
    [754, 354],
    [754, 353],
    [755, 352],
    [755, 337],
    [754, 336],
    [754, 334],
    [753, 333],
    [753, 330],
    [754, 329],
    [755, 330],
    [757, 330],
    [759, 332],
    [761, 332],
    [764, 335],
    [767, 335],
    [768, 336],
    [777, 336],
    [777, 335],
    [778, 334],
    [781, 334],
    [782, 335],
    [786, 335],
    [793, 328],
    [793, 324],
    [792, 323],
    [792, 322],
    [793, 321],
    [794, 321],
    [795, 322],
    [795, 323],
    [799, 323],
    [800, 322],
    [802, 322],
    [804, 320],
    [803, 320],
    [802, 319],
    [800, 319],
    [799, 318],
    [801, 316],
    [803, 316],
    [804, 315],
    [806, 315],
    [808, 313],
    [808, 310],
    [809, 309],
    [809, 308],
    [810, 307],
    [810, 306],
    [811, 305],
    [811, 304],
    [812, 303],
    [812, 302],
    [813, 301],
    [813, 290],
    [810, 290],
    [808, 288],
    [807, 288],
    [806, 287],
    [804, 287],
    [802, 285],
    [800, 285],
    [799, 284],
    [796, 284],
    [795, 283],
    [788, 283],
    [787, 282],
    [782, 282],
    [781, 281],
    [778, 281],
    [777, 280],
    [777, 279],
    [783, 273],
    [783, 261],
    [784, 260],
    [787, 260],
    [788, 259],
    [789, 259],
    [790, 258],
    [793, 258],
    [794, 257],
    [795, 257],
    [796, 256],
    [797, 256],
    [798, 255],
    [799, 255],
    [802, 252],
    [803, 252],
    [803, 250],
    [804, 249],
    [806, 249],
    [807, 250],
    [809, 250],
    [811, 252],
    [812, 252],
    [812, 250],
    [813, 249],
    [813, 248],
    [814, 247],
    [814, 230],
    [816, 228],
    [817, 228],
    [818, 229],
    [819, 229],
    [820, 230],
    [821, 230],
    [822, 231],
    [825, 231],
    [826, 230],
    [826, 228],
    [827, 227],
    [827, 225],
    [830, 222],
    [830, 220],
    [829, 219],
    [829, 218],
    [830, 217],
    [831, 217],
    [831, 212],
    [832, 211],
    [832, 209],
    [833, 208],
    [833, 207],
    [832, 206],
    [832, 205],
    [831, 204],
    [831, 203],
    [830, 202],
    [830, 201],
    [829, 200],
    [829, 199],
    [828, 198],
    [828, 197],
    [827, 196],
    [827, 195],
    [821, 189],
    [820, 189],
    [817, 192],
    [816, 192],
    [814, 194],
    [814, 195],
    [813, 196],
    [813, 197],
    [812, 198],
    [808, 198],
    [807, 197],
    [807, 194],
    [806, 193],
    [806, 187],
    [805, 186],
    [805, 185],
    [804, 184],
    [804, 181],
    [803, 180],
    [803, 179],
    [802, 178],
    [802, 177],
    [801, 176],
    [801, 175],
    [800, 174],
    [800, 172],
    [799, 171],
    [799, 170],
    [798, 169],
    [798, 168],
    [796, 166],
    [796, 165],
    [795, 164],
    [776, 164],
    [775, 165],
    [769, 165],
    [768, 164],
    [748, 164],
    [747, 163],
    [737, 173],
    [737, 174],
    [734, 177],
    [734, 178],
    [732, 180],
    [732, 184],
    [737, 189],
    [737, 190],
    [735, 192],
    [735, 194],
    [732, 197],
    [731, 197],
    [730, 196],
    [729, 196],
    [729, 199],
    [728, 200],
    [722, 200],
    [721, 199],
    [721, 194],
    [720, 193],
    [720, 191],
    [719, 190],
    [719, 188],
    [718, 187],
    [718, 186],
    [717, 185],
    [717, 184],
    [716, 183],
    [715, 183],
    [714, 182],
    [712, 182],
    [712, 183],
    [711, 184],
    [711, 186],
    [710, 187],
    [710, 192],
    [709, 193],
    [708, 192],
    [708, 191],
    [707, 190],
    [707, 189],
    [706, 188],
    [706, 186],
    [705, 185],
    [705, 184],
    [704, 183],
    [704, 182],
    [702, 180],
    [701, 180],
    [700, 179],
    [698, 179],
    [697, 180],
    [697, 181],
    [696, 182],
    [696, 213],
    [697, 214],
    [697, 220],
    [698, 221],
    [698, 225],
    [699, 226],
    [699, 235],
    [698, 236],
    [697, 235],
    [697, 232],
    [696, 231],
    [696, 229],
    [695, 228],
    [695, 227],
    [694, 226],
    [694, 225],
    [693, 224],
    [693, 223],
    [689, 219],
    [689, 218],
    [688, 217],
    [688, 215],
    [687, 214],
    [687, 212],
    [686, 211],
    [686, 209],
    [685, 208],
    [685, 207],
    [684, 206],
    [684, 204],
    [683, 203],
    [683, 201],
    [681, 199],
    [681, 197],
    [680, 196],
    [680, 195],
    [679, 194],
    [679, 193],
    [677, 191],
    [677, 190],
    [672, 185],
    [669, 185],
    [668, 186],
    [668, 187],
    [667, 188],
    [667, 195],
    [668, 196],
    [668, 201],
    [669, 202],
    [669, 207],
    [670, 208],
    [670, 209],
    [671, 210],
    [671, 212],
    [672, 213],
    [672, 215],
    [673, 216],
    [673, 219],
    [674, 220],
    [674, 222],
    [675, 223],
    [675, 224],
    [676, 225],
    [676, 227],
    [675, 228],
    [672, 225],
    [671, 225],
    [669, 223],
    [668, 223],
    [667, 222],
    [661, 222],
    [660, 221],
    [657, 221],
    [656, 220],
    [654, 220],
    [653, 219],
    [650, 219],
    [649, 218],
    [644, 218],
    [643, 217],
    [636, 217],
    [635, 218],
    [635, 220],
    [641, 226],
    [640, 227],
    [640, 233],
    [637, 236],
    [638, 237],
    [637, 238],
    [626, 238],
    [624, 240],
    [623, 240],
    [622, 241],
    [622, 242],
    [623, 243],
    [623, 244],
    [624, 245],
    [624, 248],
    [623, 249],
    [621, 247],
    [621, 245],
    [620, 246],
    [621, 247],
    [621, 248],
    [622, 249],
    [622, 251],
    [621, 252],
    [620, 251],
    [619, 252],
    [619, 254],
    [620, 255],
    [620, 257],
    [621, 257],
    [622, 258],
    [625, 258],
    [627, 260],
    [624, 263],
    [624, 266],
    [625, 266],
    [626, 267],
    [628, 267],
    [629, 268],
    [630, 268],
    [631, 269],
    [631, 270],
    [630, 271],
    [630, 272],
    [629, 273],
    [629, 274],
    [628, 275],
    [628, 276],
    [627, 277],
    [627, 278],
    [628, 277],
    [628, 276],
    [634, 270],
    [634, 269],
    [635, 268],
    [651, 268],
    [652, 269],
    [651, 270],
    [650, 270],
    [647, 273],
    [646, 273],
    [645, 274],
    [644, 274],
    [643, 275],
    [642, 275],
    [641, 276],
    [640, 276],
    [639, 277],
    [638, 277],
    [637, 278],
    [636, 278],
    [635, 279],
    [634, 279],
    [632, 281],
    [631, 281],
    [624, 288],
    [623, 288],
    [622, 287],
    [619, 287],
    [618, 286],
    [617, 286],
    [616, 285],
    [614, 285],
    [613, 284],
    [606, 284],
    [605, 283],
    [606, 282],
    [607, 282],
    [608, 281],
    [610, 281],
    [611, 280],
    [612, 280],
    [613, 279],
    [614, 279],
    [615, 278],
    [616, 278],
    [619, 275],
    [619, 274],
    [620, 273],
    [620, 270],
    [618, 268],
    [617, 268],
    [616, 267],
    [615, 267],
    [614, 266],
    [607, 266],
    [606, 267],
    [593, 267],
    [592, 268],
    [590, 268],
    [589, 267],
    [597, 259],
    [597, 258],
    [599, 256],
    [599, 255],
    [601, 253],
    [601, 250],
    [602, 249],
    [602, 248],
    [603, 247],
    [603, 245],
    [602, 244],
    [602, 240],
    [601, 239],
    [601, 238],
    [597, 234],
    [597, 233],
    [598, 232],
    [598, 231],
    [597, 230],
    [597, 228],
    [596, 227],
    [595, 227],
    [592, 224],
    [583, 224],
    [582, 225],
    [580, 225],
    [579, 226],
    [568, 226],
    [567, 225],
    [567, 221],
    [566, 220],
    [566, 217],
    [567, 216],
    [567, 212],
    [566, 211],
    [566, 210],
    [565, 209],
    [562, 209],
    [561, 210],
    [560, 210],
    [559, 211],
    [558, 211],
    [556, 213],
    [555, 213],
    [554, 214],
    [553, 214],
    [552, 215],
    [551, 215],
    [545, 221],
    [545, 222],
    [544, 223],
    [544, 224],
    [542, 226],
    [542, 227],
    [541, 228],
    [540, 227],
    [540, 225],
    [541, 224],
    [541, 203],
    [540, 202],
    [534, 202],
    [533, 203],
    [528, 203],
    [526, 205],
    [525, 205],
    [520, 210],
    [520, 211],
    [519, 212],
    [519, 213],
    [516, 216],
    [516, 218],
    [515, 219],
    [515, 220],
    [514, 221],
    [514, 222],
    [513, 223],
    [513, 225],
    [512, 226],
    [512, 227],
    [511, 228],
    [511, 231],
    [510, 232],
    [510, 236],
    [509, 237],
    [509, 243],
    [508, 244],
    [508, 246],
    [507, 247],
    [507, 265],
    [508, 266],
    [508, 269],
    [509, 270],
    [509, 275],
    [508, 276],
    [507, 275],
    [507, 272],
    [506, 271],
    [506, 269],
    [505, 268],
    [505, 266],
    [504, 265],
    [504, 264],
    [503, 263],
    [503, 262],
    [502, 261],
    [502, 260],
    [501, 259],
    [501, 256],
    [488, 243],
    [492, 239],
    [494, 239],
    [499, 234],
    [499, 232],
    [495, 228],
    [492, 228],
    [491, 227],
    [490, 227],
    [487, 224],
    [486, 224],
    [485, 223],
    [479, 223],
    [478, 222],
    [476, 222],
    [474, 220],
    [472, 220],
    [471, 219],
    [469, 219],
    [468, 218],
    [464, 218],
    [463, 217],
    [463, 216],
    [464, 215],
    [464, 208],
    [465, 207],
    [465, 204],
    [466, 203],
    [467, 203],
    [469, 201],
    [469, 200],
    [471, 198],
    [471, 197],
    [472, 196],
    [472, 194],
    [471, 193],
    [470, 193],
    [469, 192],
    [465, 192],
    [464, 191],
    [464, 168],
    [462, 168],
    [461, 169],
    [459, 169],
    [458, 170],
    [456, 170],
    [455, 169],
    [455, 168],
    [454, 167],
    [454, 164],
    [453, 163],
    [453, 162],
  ],
];

export default Blocks;
